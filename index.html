<html>    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">    <h1>Custom WebView Cell with JS observers</h1>
    <body onload="checkIfIsRunningInApp()">
        <h2>This web page is running in the <span id="isRunningInApp"></span></h2>

        <button onClick='openLink("https://www.amazon.com");'>Link WITH JS EVENT, and IT IS NOT an HTV article, it should open the new page OVER the current article.</button>
        <button onClick='openLink("https://khtvnews.com/article/ios-17-release-new-iphone-features/45195842");'>Link WITH JS EVENT, and IT IS an HTV article, it should open the article inside the app.</button>
        <a href="https://www.amazon.com" target="_blank">
            Link WITHOUT JS EVENT, and IT IS NOT an HTV article, it should open the Safari app.
        </a>
        <a href="https://khtvnews.com/article/ios-17-release-new-iphone-features/45195842" target="_blank">
            Link WITHOUT JS EVENT, and IT IS an HTV article, it should open the article inside the app.
        </a>

    </body>
    <script>
        function openInternaliOS(url) {
            webkit.messageHandlers.segue.postMessage(url);
        }
        function openInternalAndroid(url) {
            AndroidJSInterface.openUrlInsideApp(url);
        }
        function openLink(url) {
            if (isRunningIniOS()) {
                openInternaliOS(url);
            }
            else if (isRunningInAndroid()) {
                openInternalAndroid(url);
            }
            else {
                window.open(url, '_blank');
            }
        }
        function isRunningIniOS() {
            try {
                return localStorage.getItem("isNative");
            } catch (error) {
                return false;
            }
        }
        function isRunningInAndroid() {
            try {
                return AndroidJSInterface.isNative();
            } catch (error) {
                return false;
            }
        }
        function isRunningInsideTheApp() {
            return isRunningIniOS() || isRunningInAndroid();
        }
        function checkIfIsRunningInApp() {
            var message = "browser";
            const isInsideApp = isRunningInsideTheApp();
            if (isInsideApp) {
                message = "app";
            } 
            document.getElementById("isRunningInApp").innerHTML = message;
        } 
    </script>
</html>